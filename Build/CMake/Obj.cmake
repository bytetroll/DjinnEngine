function(Djinn_GetObjectPath TARGET SOURCE OUTPUT)
    if (MSVC)
        foreach (f ${source_files})
            GET_FILENAME_COMPONENT(fname ${SOURCE} NAME)
            string(REPLACE ".cpp" ".obj" fname2 ${fname})
            string(REPLACE ".c" ".obj" fname2 ${fname2})
            if (MSVC60)
                set(${OUTPUT} "${CMAKE_CURRENT_BINARY_DIR}/${CMAKE_CFG_INTDIR}/${fname2}" PARENT_SCOPE)
            else ()
                set(${OUTPUT} "${CMAKE_CURRENT_BINARY_DIR}/${TARGET}.dir/${CMAKE_CFG_INTDIR}/${fname2}" PARENT_SCOPE)
            endif ()
        endforeach ()
    else ()
        # Backwards compat to CMake <= 2.8.4
        if ("${CMAKE_CURRENT_LIST_DIR}" STREQUAL "")
            get_filename_component(CMAKE_CURRENT_LIST_DIR ${CMAKE_CURRENT_LIST_FILE} PATH ABSOLUTE)
        endif ()

        set(source ${SOURCE})
        string(REPLACE "${DJINN_PATH_BUILD_CMAKE_CACHE}/" "" source "${source}")
        string(REPLACE "${CMAKE_CURRENT_LIST_DIR}/" "" source "${source}")
        if (WIN32)
            set(${OUTPUT} "${CMAKE_CURRENT_BINARY_DIR}/CMakeFiles/${TARGET}.dir/${source}.obj" PARENT_SCOPE)
        else ()
            set(${OUTPUT} "${CMAKE_CURRENT_BINARY_DIR}/CMakeFiles/${TARGET}.dir/${source}.o" PARENT_SCOPE)
        endif ()
    endif ()

endfunction()
